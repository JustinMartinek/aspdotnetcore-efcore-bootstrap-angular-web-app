!function(){"use strict";function t(t,o){var s=this;s.tripName=t.tripName,s.stops=[],s.errorMessage="",s.isBusy=!0,s.newStop={},o.get("/api/trips/"+s.tripName+"/stops").then(function(t){s.errorMessage="",angular.copy(t.data,s.stops),e(s.stops)},function(t){s.errorMessage="Failed to get the trip: "+t})["finally"](function(){s.isBusy=!1}),s.addStop=function(){s.isBusy=!0,o.post("/api/trips/"+s.tripName+"/stops",s.newStop).then(function(t){s.errorMessage="",s.stops.push(t.data),e(s.stops),s.newStop={}},function(t){s.errorMessage="Failed to save the trip: "+t})["finally"](function(){s.isBusy=!1})}}function e(t){if(t&&t.length>0){var e=_.map(t,function(t){return{lat:t.latitude,"long":t.longitude,info:t.name}});travelMap.createMap({stops:e,selector:"#map",currentStop:1,initialZoom:3})}}angular.module("app-trips").controller("tripEditorController",t)}();